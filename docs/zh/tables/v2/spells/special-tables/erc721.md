---
description: A smart contract interface standard for non-fungible tokens.
---

# ERC721

### **ERC721定义**

ERC721代币标准是用于所有EVM区块链上的非同质化资产的代币标准。ERC721可以代表数字艺术、房屋契约、保险单，甚至是uniswap V3流动性头寸。所有这些事物的共同属性是它们是非同质化的，因此也是独一无二的。

ERC721代币将 `contract_address` 和 `tokenId` 的作为唯一标识。

每个智能合约中同一个“tokenId”只能出现1次。该接口的一个可选功能是“tokenURI”属性，这里边存储了该智能合约中“tokenId”相关的多媒体内容。 这主要是指向去中心化存储解决方案的链接，例如 [ifps](https://ipfs.io)。

因为也是受了ERC20代币标准的影响，ERC721标准中也包含许多与之类似的功能，但由于增加了 `tokenId` 的复杂性，它也确实扩展了其他功能 \*\*\*\*。

**Methods**

```solidity
    function balanceOf(address _owner) external view returns (uint256); 
    /* 返回所有者地址包含的代币数量 */
    function ownerOf(uint256 _tokenId) external view returns (address);
    /* 返回NFT的持有者,通过tokenId唯一标识*/
    function safeTransferFrom(address _from, address _to, uint256 _tokenId) external payable;
    /* 将某个代币从发送方转移到接收方 */
    function transferFrom(address _from, address _to, uint256 _tokenId) external payable;
    /* 将某个代币从发送方转移到接收方*/
    function approve(address _approved, uint256 _tokenId) external payable;
    /* 用于批准某个地址转移一个特定的tokenID */
    function setApprovalForAll(address _operator, bool _approved) external;
    /* 用于批准某个地址转移任意的tokenID */
    function getApproved(uint256 _tokenId) external view returns (address);
    /* 返回当前能够转移此Token的地址。一次只能激活一个*/
    function isApprovedForAll(address _owner, address _operator) external view returns (bool);
    /* 返回执行方是否得到相关代币所有人的认可 */
```

**Events**

```solidity
 event Transfer(address _from, address _to, uint256 _tokenId);
 /* Token成功转移的时候发出，每次只包含1个单位*/
 event Approval(address _owner, address _approved, uint256 _tokenId);
 /* 在执行方批准特定TokenId的时候发出 */
 event ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);
 /* 在执行方批准所有TokenId的时候发出 */
```

### **Tables in Dune**

在Dune中，我们将所有来自智能合约的所有 erc721 转移事件解码到 erc721_blockchain.ERC721_evt_Transfer 表中。

#### erc721\_blockchain.ERC721**\_evt\_Transfer**

This is the event that gets emitted upon successful transfer of a token within a ERC721 smart contract. This can be triggered by either the `safeTransferFrom` or the `transferFrom` functions.

| from               | string      | the sender of the `ERC721` token                                                       |
| ------------------ | ----------- | -------------------------------------------------------------------------------------- |
| to                 | string      | the receiver of the `ERC721` token                                                     |
| tokenID            | numeric     | The Token ID which uniquely identifies this NFT                                        |
| contract\_address  | string      | the contract\_address of this `ERC721` token                                           |
| evt\_tx\_hash      | string      | the transaction hash in which this event got emitted                                   |
| evt\_index         | numeric     | this logs index position in the block (cumulative amount of logs ordered by execution) |
| evt\_block\_time   | timestamptz | the time at which the block that contains this event log got mined                     |
| evt\_block\_number | int8        | the length of the blockchain                                                           |

#### erc721\_blockchain.ERC721\_evt\_Approval

This is the event that gets emitted upon a successful call of the `approve` function.

| owner              | string                   | the address which gives permission to move this token                                  |
| ------------------ | ------------------------ | -------------------------------------------------------------------------------------- |
| approved           | string                   | the operator which is able to move the specified `tokenId`                             |
| tokenId            | numeric                  | the `tokenId` in question                                                              |
| contract\_address  | string                   | the contract\_address of this `ERC721` token                                           |
| evt\_tx\_hash      | string                   | the transaction hash in which this event got emitted                                   |
| evt\_index         | bigint                   | this logs index position in the block (cumulative amount of logs ordered by execution) |
| evt\_block\_time   | timestamp with time zone | the time at which the block that contains this event log got mined                     |
| evt\_block\_number | bigint                   | the length of the blockchain                                                           |
